<!DOCTYPE html>
<html>
<head>
    <title>Voronoi-Diagramm</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.2/p5.js"></script>
    <script src="Pixel.js"></script>
    <script src="Circle.js"></script>
    <script src="sketch.js"></script>
    <link rel='stylesheet' href='/style.css' />
</head>
<body>
    <div id="container_box">
        <div id="canvas"></div>
        <div id="button_menue">
            <label class="margin" style="color: #ffffff" for="amountPointsInput">How many Points?</label>
            <input class="margin size" id="amountPointsInput" value="10" type="number">
            <button id="setAmountPoint" type="button" class="startButton" onclick="generatePoints()">Generate points</button>
            <button id="start_circle_mode" type="button" class="startButton" onclick="buttonClick(1)">Start Circle Mode</button>
            <button id="stop" type="button" onclick="buttonClick(0)">Stop</button>
            <button id="reset" type="button" onclick="buttonClick(-1)">Reset</button>
        </div>
    </div>
</body>
<script>
    var lastState = DO_NOTHING;
    var startButtons = document.getElementsByClassName('startButton');
    var stopContButton = document.getElementById('stop');
    var stopCounter = 0;
    (function(){
    // do some stuff
        setTimeout(arguments.callee, 10);

        if(state == DO_NOTHING && isSetup){
            stopContButton.disabled = true;
            stopContButton.firstChild.data = 'stop';
            for(var i = 0; i < startButtons.length; i++){
                startButtons[i].disabled = false;
            }
        } else if(state != DO_NOTHING){
            stopContButton.disabled = false;
            stopContButton.firstChild.data = 'stop';
            for(var i = 0; i < startButtons.length; i++){
                startButtons[i].disabled = true;
            }
        } else if(state == DO_NOTHING && !isSetup && finished){
            stopContButton.disabled = true;
        } else if(state == DO_NOTHING && !isSetup){
            stopContButton.disabled = false;
            stopContButton.firstChild.data = 'continue';
        } 
    })();

    function buttonClick(statePara){
        if(statePara == 0 /*if STOP pressed */ && stopCounter % 2 == 0){
            lastState = state;
            state = statePara;
            stopCounter++;
        } else if(statePara == 0)  /*if CONTINUE pressed */ {
            state = lastState;
            stopCounter++;
        } else {
            state = statePara;
        }
        if(state != DO_NOTHING){
            var startButtons = document.getElementsByClassName('startButton');
            for(var i = 0; i < startButtons.length; i++){
                startButtons[i].disabled = true;
            }
        }

        if(state == DO_NOTHING && statePara == -1){
            var startButtons = document.getElementsByClassName('startButton');
            for(var i = 0; i < startButtons.length; i++){
                startButtons[i].disabled = false;
            }
        }
    }
    function generatePoints(){
        amountPoints = document.getElementById("amountPointsInput").value
        state = GENERATE_CIRCLES;
    }
</script>
</html>